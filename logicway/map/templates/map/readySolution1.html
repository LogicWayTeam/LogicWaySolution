<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walking Route with GraphHopper</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

<script>
    // Инициализация карты
    const map = L.map('map').setView([52.406374, 16.9251681], 13);

    // Добавление базовой карты OSM
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
    }).addTo(map);

    // Начальные и конечные точки
    const startPoint = [52.406374, 16.9251681]; // Начальная точка (Poznań)
    const endPoint = [52.409538, 16.9326328];   // Конечная точка

    // Маршрут через GraphHopper API
    const ghAPIKey = 'fd0d546d-25c1-4c67-a080-f62fbb384699';

    const ghURL = `https://graphhopper.com/api/1/route?point=${startPoint.join(',')}&point=${endPoint.join(',')}&profile=foot&locale=en&key=${ghAPIKey}&points_encoded=false`;

    fetch(ghURL)
        .then(response => response.json())
        .then(data => {
            const route = data.paths[0].points.coordinates;

            // Преобразуем координаты маршрута в формат Leaflet и отобразим на карте
            const latLngRoute = route.map(point => [point[1], point[0]]);
            L.polyline(latLngRoute, { color: 'blue', weight: 5 }).addTo(map);

            // Установим начальный и конечный маркеры
            L.marker(startPoint).addTo(map).bindPopup('Start Point').openPopup();
            L.marker(endPoint).addTo(map).bindPopup('End Point').openPopup();

            // Настроим вид карты, чтобы охватить весь маршрут
            map.fitBounds(L.polyline(latLngRoute).getBounds());
        })
        .catch(error => console.error('Error fetching route:', error));
</script>

</body>
</html>
